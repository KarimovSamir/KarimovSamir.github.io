import React, { useState, useMemo } from 'react';
import { ChevronLeft, ChevronRight, Clock, Thermometer, Wind, Flame, UtensilsCrossed, ChefHat, BookOpen, Hammer } from 'lucide-react';

const RecipeBook = () => {
  const [activeTab, setActiveTab] = useState('all'); // 'all', 'oven', 'dev'
  const [currentPage, setCurrentPage] = useState(0);

  // --- –î–∞–Ω–Ω—ã–µ ---

  // –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤
  const rawRecipes = [
    {
      id: 'cutlets',
      category: 'oven',
      title: '–ö–æ—Ç–ª–µ—Ç—ã / –ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã',
      subtitle: '–°–æ—á–Ω—ã–µ –∏ —Å —Ö—Ä—É—Å—Ç—è—â–µ–π –∫–æ—Ä–æ—á–∫–æ–π',
      image: 'cutlets.jpg',
      tags: ['–ó–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ', '–û–±–µ–¥'],
      meta: { temp: '200¬∞C', time: '25-30 –º–∏–Ω', mode: '–ö–æ–Ω–≤–µ–∫—Ü–∏—è' },
      ingredients: [
        '–ö–æ—Ç–ª–µ—Ç—ã (–∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ)',
        '–ü–µ—Ä–≥–∞–º–µ–Ω—Ç –¥–ª—è –≤—ã–ø–µ—á–∫–∏',
        '–ú–∞—Å–ª–æ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)'
      ],
      steps: [
        '–†–∞–∑–æ–≥—Ä–µ—Ç—å –¥—É—Ö–æ–≤–∫—É –¥–æ 200¬∞C. –†–µ–∂–∏–º: –∫–æ–Ω–≤–µ–∫—Ü–∏—è (–≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä –≤ –∫—Ä—É–≥–µ).',
        '–í—ã–ª–æ–∂–∏—Ç—å –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ –∫–æ—Ç–ª–µ—Ç—ã –Ω–∞ –ø–µ—Ä–≥–∞–º–µ–Ω—Ç (—Å—Ä–µ–¥–Ω—è—è –ø–æ–ª–∫–∞).',
        '–ó–∞–ø–µ–∫–∞—Ç—å: –¢–æ–Ω–∫–∏–µ ‚Äî 25 –º–∏–Ω, –¢–æ–ª—Å—Ç—ã–µ ‚Äî 30 –º–∏–Ω.',
        '–í–ê–ñ–ù–û: –í –∫–æ–Ω—Ü–µ –≤–∫–ª—é—á–∏—Ç—å –±–æ–ª—å—à–æ–π –≥—Ä–∏–ª—å (–ø—Ä—è–º–∞—è –ª–∏–Ω–∏—è + —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏) –Ω–∞ 2‚Äì3 –º–∏–Ω—É—Ç—ã –¥–ª—è –∫–æ—Ä–æ—á–∫–∏.',
        '–î–∞—Ç—å –ø–æ—Å—Ç–æ—è—Ç—å 2 –º–∏–Ω—É—Ç—ã –∏ –ø–æ–¥–∞–≤–∞—Ç—å.'
      ]
    },
    {
      id: 'chicken-sticks',
      category: 'oven',
      title: '–ö—É—Ä–∏–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏',
      subtitle: '–ò–¥–µ–∞–ª—å–Ω–∞—è –∑–∞–∫—É—Å–∫–∞',
      image: 'chicken-sticks.jpg',
      tags: ['–ó–∞–∫—É—Å–∫–∞', '–ë—ã—Å—Ç—Ä–æ'],
      meta: { temp: '210¬∞C', time: '14-20 –º–∏–Ω', mode: '–ö–æ–Ω–≤–µ–∫—Ü–∏—è' },
      ingredients: [
        '–ö—É—Ä–∏–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏',
        '–õ—é–±–∏–º—ã–π —Å–æ—É—Å',
        '–°–ø–µ—Ü–∏–∏ –ø–æ –≤–∫—É—Å—É'
      ],
      steps: [
        '–†–∞–∑–æ–≥—Ä–µ—Ç—å –¥—É—Ö–æ–≤–∫—É –¥–æ 210¬∞C. –†–µ–∂–∏–º: –∫–æ–Ω–≤–µ–∫—Ü–∏—è.',
        '–û—Ç—Å–∞–¥–∏—Ç—å –ø–∞–ª–æ—á–∫–∏ –Ω–∞ –ø–µ—Ä–≥–∞–º–µ–Ω—Ç –Ω–∞ —Å—Ä–µ–¥–Ω—é—é –ø–æ–ª–∫—É.',
        '–ó–∞–ø–µ–∫–∞—Ç—å 14‚Äì20 –º–∏–Ω—É—Ç –¥–æ –∑–æ–ª–æ—Ç–∏—Å—Ç–æ–≥–æ —Ü–≤–µ—Ç–∞.',
        '–ó–∞ 2 –º–∏–Ω—É—Ç—ã –¥–æ –∫–æ–Ω—Ü–∞ –≤–∫–ª—é—á–∏—Ç—å –±–æ–ª—å—à–æ–π –≥—Ä–∏–ª—å.',
        '–î–∞—Ç—å –æ—Å—Ç—ã—Ç—å –º–∏–Ω—É—Ç—É, —á—Ç–æ–±—ã —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∞—Å—å –∫–æ—Ä–æ—á–∫–∞.'
      ]
    }
  ];

  // –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∞–±–∞
  const pages = useMemo(() => {
    if (activeTab === 'dev') {
      return [{ id: 'dev-page', type: 'dev' }];
    }

    let filteredRecipes = rawRecipes;
    if (activeTab === 'oven') {
      filteredRecipes = rawRecipes.filter(r => r.category === 'oven');
    }

    return [
      {
        id: 'cover',
        type: 'cover',
        title: '–°–µ–º–µ–π–Ω—ã–µ\n–†–µ—Ü–µ–ø—Ç—ã',
        subtitle: '–ö–æ–ª–ª–µ–∫—Ü–∏—è –ª—É—á—à–∏—Ö –±–ª—é–¥'
      },
      ...filteredRecipes.map(r => ({ ...r, type: 'recipe' })),
      {
        id: 'end',
        type: 'end',
        title: '–ü—Ä–∏—è—Ç–Ω–æ–≥–æ\n–∞–ø–ø–µ—Ç–∏—Ç–∞!',
        subtitle: '–ì–æ—Ç–æ–≤—å—Ç–µ —Å –ª—é–±–æ–≤—å—é'
      }
    ];
  }, [activeTab]);

  const totalPages = pages.length;

  // --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ---

  const handleTabChange = (tabId) => {
    setActiveTab(tabId);
    setCurrentPage(0); // –°–±—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–∞–∑–¥–µ–ª–∞
  };

  const nextPage = () => {
    if (currentPage < totalPages - 1) {
      setCurrentPage(prev => prev + 1);
    }
  };

  const prevPage = () => {
    if (currentPage > 0) {
      setCurrentPage(prev => prev - 1);
    }
  };

  // --- –†–µ–Ω–¥–µ—Ä ---

  return (
    <div className="min-h-screen bg-[#1a1a1a] flex flex-col items-center justify-center p-4 overflow-hidden font-sans selection:bg-red-200">
      
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–∞–π—Ç–∞ */}
      <h1 className="text-3xl md:text-4xl font-serif text-amber-50 mb-6 drop-shadow-md tracking-widest uppercase opacity-80" style={{ fontFamily: '"Courier Prime", serif' }}>
        –ö—É–ª–∏–Ω–∞—Ä–Ω–∞—è –ö–Ω–∏–≥–∞
      </h1>

      {/* –ì–õ–ê–í–ù–´–ô –ö–û–ù–¢–ï–ô–ù–ï–† –ö–ù–ò–ì–ò */}
      <div className="relative flex items-center justify-center perspective-2000">
        
        {/* –ö–Ω–∏–≥–∞ (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∫–æ—Ä–µ—à–æ–∫ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã) */}
        <div className="relative flex shadow-2xl rounded-r-2xl overflow-visible z-10 transition-all duration-500">
          
          {/* 1. –ö–û–†–ï–®–û–ö (–°—Ç–∞—Ç–∏—á–Ω—ã–π, —Å–ª–µ–≤–∞) - –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –∫–æ–ª—å—Ü–∞–º–∏ */}
          <div className="w-14 md:w-20 bg-gradient-to-r from-red-950 to-red-900 flex flex-col items-center justify-evenly py-12 rounded-l-lg border-r border-red-950 shadow-inner z-50 relative">
            <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-30 mix-blend-multiply"></div>
            {/* –ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–π –∑–∞–∂–∏–º –∫–æ—Ä–µ—à–∫–∞ */}
            <div className="absolute left-1 top-2 bottom-2 w-2 bg-red-950/50 border-r border-white/5"></div>

            {[1, 2, 3].map((_, i) => (
              <div key={i} className="relative z-20">
                {/* –û—Ç–≤–µ—Ä—Å—Ç–∏–µ –≤ –∫–æ—Ä–µ—à–∫–µ */}
                <div className="w-4 h-4 rounded-full bg-black/60 shadow-[inset_0_2px_4px_rgba(0,0,0,0.8)] mb-[-8px] mx-auto"></div>
                {/* –°–∞–º–æ –∫–æ–ª—å—Ü–æ (–ú–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∞—è –¥—É–≥–∞) */}
                <div className="w-12 h-10 md:w-16 md:h-12 border-4 md:border-6 border-gray-300 rounded-[50%] border-l-transparent border-r-gray-400 shadow-md transform -translate-x-1 relative">
                  {/* –ë–ª–∏–∫ –Ω–∞ –∫–æ–ª—å—Ü–µ */}
                  <div className="absolute top-1 right-2 w-3 h-3 bg-white rounded-full opacity-60 blur-[1px]"></div>
                </div>
              </div>
            ))}
          </div>

          {/* 2. –ë–õ–û–ö –°–¢–†–ê–ù–ò–¶ */}
          <div className="w-[340px] md:w-[700px] h-[500px] md:h-[550px] relative perspective-2000 bg-[#2c0b0e] rounded-r-2xl border-t-8 border-b-8 border-r-8 border-[#3f1216]">
             {/* –¢–µ–∫—Å—Ç—É—Ä–∞ –∑–∞–¥–Ω–µ–π –æ–±–ª–æ–∂–∫–∏ –≤–Ω—É—Ç—Ä–∏ */}
             <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-40 rounded-r-lg"></div>

            {pages.map((page, index) => {
              // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞
              let transform = '';
              let zIndex = totalPages - Math.abs(currentPage - index);
              let opacity = 1;

              if (index < currentPage) {
                // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞ –≤–ª–µ–≤–æ
                transform = 'rotateY(-180deg)';
                // –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –º–Ω–æ–≥–æ, —Å–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–µ, —á—Ç–æ–±—ã –Ω–µ –≥—Ä—É–∑–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä
                if (currentPage - index > 1) opacity = 0; 
              } else if (index === currentPage) {
                // –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
                transform = 'rotateY(0deg)';
              } else {
                // –°–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                transform = 'rotateY(0deg)';
                // –°–¥–≤–∏–≥–∞–µ–º –∏—Ö —á—É—Ç—å –Ω–∏–∂–µ –≤–∏–∑—É–∞–ª—å–Ω–æ, —Å–æ–∑–¥–∞–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç —Å—Ç–æ–ø–∫–∏
                // –ù–æ–ª—å –≥—Ä–∞–¥—É—Å–æ–≤, —á—Ç–æ–±—ã –æ–Ω–∏ –ª–µ–∂–∞–ª–∏ —Ä–æ–≤–Ω–æ
              }
              
              const isCover = page.type === 'cover';
              const isDev = page.type === 'dev';

              return (
                <div
                  key={page.id}
                  className={`absolute top-0 bottom-0 left-0 w-full rounded-r-xl origin-left transition-all duration-700 ease-[cubic-bezier(0.645,0.045,0.355,1)]
                    ${index === 0 ? '' : ''}
                  `}
                  style={{
                    transformStyle: 'preserve-3d',
                    transform,
                    zIndex,
                    opacity
                  }}
                >
                  {/* –õ–ò–¶–ï–í–ê–Ø –°–¢–û–†–û–ù–ê –°–¢–†–ê–ù–ò–¶–´ */}
                  <div className={`
                    absolute inset-0 backface-hidden shadow-md overflow-hidden
                    ${isCover ? 'bg-gradient-to-br from-red-900 to-[#4a0404]' : 'bg-[#fdfbf7]'}
                    rounded-r-xl
                  `}>
                    
                    {/* –¢–µ–∫—Å—Ç—É—Ä–∞ –¥–ª—è –æ–±–ª–æ–∂–∫–∏ (–ö–æ–∂–∞) */}
                    {isCover && (
                       <>
                         <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-40 mix-blend-multiply"></div>
                         {/* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ—Å—Ç—Ä–æ—á–∫–∏ –Ω–∏—Ç–∫–∞–º–∏ –ø–æ –∫—Ä–∞—é */}
                         <div className="absolute inset-4 border-2 border-dashed border-yellow-600/30 rounded-r-lg pointer-events-none"></div>
                       </>
                    )}

                    {/* –¢–µ–∫—Å—Ç—É—Ä–∞ –¥–ª—è –±—É–º–∞–≥–∏ */}
                    {!isCover && (
                      <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cream-paper.png')] opacity-60 pointer-events-none"></div>
                    )}
                    
                    {/* –î—ã—Ä–∫–∏ –Ω–∞ —Å–∞–º–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–≤–∏–∑—É–∞–ª—å–Ω–æ –Ω–∞–¥–µ—Ç—ã –Ω–∞ –∫–æ–ª—å—Ü–∞) */}
                    <div className="absolute left-2 top-0 bottom-0 w-6 flex flex-col justify-evenly py-12 z-20">
                       {[1, 2, 3].map((_, i) => (
                        <div key={i} className="w-3 h-3 md:w-4 md:h-4 rounded-full bg-[#2c0b0e] shadow-[inset_0_1px_2px_rgba(0,0,0,0.5)]"></div>
                      ))}
                    </div>

                    {/* –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Å –æ—Ç—Å—Ç—É–ø–æ–º –æ—Ç –¥—ã—Ä–æ–∫) */}
                    <div className="h-full pl-8 md:pl-10 pr-4 md:pr-8 py-6 md:py-8 overflow-y-auto custom-scrollbar relative z-10">
                      {isCover ? (
                        <CoverPage title={page.title} subtitle={page.subtitle} />
                      ) : page.type === 'end' ? (
                        <EndPage title={page.title} subtitle={page.subtitle} />
                      ) : isDev ? (
                        <DevPage />
                      ) : (
                        <RecipeContent recipe={page} />
                      )}
                    </div>
                  </div>

                  {/* –û–ë–û–†–û–¢–ù–ê–Ø –°–¢–û–†–û–ù–ê (–≤–∏–¥–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏–∏) */}
                  <div className={`
                    absolute inset-0 backface-hidden rounded-l-xl rounded-r-none shadow-md flex items-center justify-center transform rotate-y-180
                    ${isCover 
                      ? 'bg-gradient-to-bl from-red-900 to-[#4a0404]' 
                      : 'bg-[#f4ebd0]'
                    }
                  `}>
                    {isCover && <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-40 mix-blend-multiply"></div>}
                    {!isCover && <div className="opacity-5 text-2xl font-serif rotate-180 select-none">–ó–∞–º–µ—Ç–∫–∏</div>}
                  </div>
                </div>
              );
            })}
          </div>

          {/* 3. –¢–ê–ë–´ (–°–ø—Ä–∞–≤–∞) - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ */}
          <div className="absolute -right-[44px] md:-right-[52px] top-8 flex flex-col gap-2 z-0">
             
             {/* –¢–∞–± 1: –í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã */}
             <TabButton 
               label="–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã" 
               isActive={activeTab === 'all'} 
               onClick={() => handleTabChange('all')} 
               color="bg-emerald-700"
               icon={<BookOpen size={16} />}
             />

             {/* –¢–∞–± 2: –î—É—Ö–æ–≤–∫–∞ */}
             <TabButton 
               label="–î—É—Ö–æ–≤–∫–∞" 
               isActive={activeTab === 'oven'} 
               onClick={() => handleTabChange('oven')} 
               color="bg-amber-600"
               icon={<Flame size={16} />}
             />

             {/* –¢–∞–± 3: –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ */}
             <TabButton 
               label="–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ" 
               isActive={activeTab === 'dev'} 
               onClick={() => handleTabChange('dev')} 
               color="bg-gray-600"
               icon={<Hammer size={16} />}
             />
          </div>

        </div>
      </div>

      {/* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) */}
      {activeTab !== 'dev' && (
        <div className="mt-10 flex gap-8 z-50">
          <NavButton onClick={prevPage} disabled={currentPage === 0} icon={<ChevronLeft size={28} />} />
          <div className="font-mono text-gray-500 mt-3 text-sm">
            {currentPage + 1} / {totalPages}
          </div>
          <NavButton onClick={nextPage} disabled={currentPage === totalPages - 1} icon={<ChevronRight size={28} />} />
        </div>
      )}

      <style jsx>{`
        .perspective-2000 { perspective: 2000px; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(120, 53, 15, 0.2); border-radius: 10px; }
      `}</style>
    </div>
  );
};

// --- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI ---

const TabButton = ({ label, isActive, onClick, color, icon }) => (
  <button
    onClick={onClick}
    className={`
      w-[44px] md:w-[52px] h-28 md:h-32 
      rounded-r-lg shadow-lg border-l border-black/20
      flex flex-col items-center justify-center gap-2
      transition-all duration-300 transform hover:translate-x-1
      ${isActive ? `${color} translate-x-1 brightness-110` : 'bg-stone-200 hover:bg-stone-100'}
    `}
  >
    <div className={`transform ${isActive ? 'text-white' : 'text-stone-600'}`}>
      {icon}
    </div>
    <span 
      className={`
        text-[10px] md:text-xs font-bold uppercase tracking-wider whitespace-nowrap
        ${isActive ? 'text-white' : 'text-stone-600'}
      `}
      style={{ writingMode: 'vertical-rl', transform: 'rotate(180deg)' }}
    >
      {label}
    </span>
  </button>
);

const NavButton = ({ onClick, disabled, icon }) => (
  <button 
    onClick={onClick}
    disabled={disabled}
    className={`
      p-3 rounded-full bg-white text-stone-800 shadow-xl 
      transition-all transform hover:scale-110 active:scale-95 
      disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:scale-100
    `}
  >
    {icon}
  </button>
);

// --- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –°—Ç—Ä–∞–Ω–∏—Ü ---

const CoverPage = ({ title, subtitle }) => (
  <div className="flex flex-col items-center justify-center h-full text-center relative">
    {/* –ó–æ–ª–æ—Ç–∞—è —Ä–∞–º–∫–∞ */}
    <div className="absolute inset-2 md:inset-6 border border-yellow-500/30 rounded-lg"></div>
    <div className="absolute inset-3 md:inset-7 border border-yellow-500/30 rounded-lg"></div>
    
    <div className="bg-gradient-to-b from-yellow-300 to-yellow-600 bg-clip-text text-transparent mb-6 opacity-90">
      <ChefHat size={80} className="text-yellow-500 drop-shadow-md" />
    </div>
    
    <h1 className="text-4xl md:text-6xl font-bold font-serif leading-tight mb-6 tracking-wide" 
        style={{ 
          color: '#e8cfa0', // –ó–æ–ª–æ—Ç–∏—Å—Ç—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞
          textShadow: '2px 2px 4px rgba(0,0,0,0.6)' 
        }}>
      {title}
    </h1>
    
    <div className="w-16 h-1 bg-gradient-to-r from-transparent via-yellow-500 to-transparent mb-6"></div>
    
    <p className="text-lg md:text-xl font-medium italic text-yellow-100/80 tracking-widest font-serif">
      {subtitle}
    </p>
    
    <div className="absolute bottom-12 text-[10px] text-yellow-500/40 uppercase tracking-[0.3em]">
      Est. 2023
    </div>
  </div>
);

const EndPage = ({ title, subtitle }) => (
  <div className="flex flex-col items-center justify-center h-full border-4 border-double border-stone-300 m-2 md:m-4 p-8 text-center bg-stone-50/50 rounded-lg">
    <div className="w-24 h-24 rounded-full bg-green-50 border border-green-100 flex items-center justify-center mb-6 shadow-sm">
       <UtensilsCrossed className="text-green-600 opacity-60" size={40} />
    </div>
    <h2 className="text-3xl md:text-4xl font-serif text-stone-700 mb-2">{title}</h2>
    <p className="text-stone-500 font-serif italic">{subtitle}</p>
  </div>
);

const DevPage = () => (
  <div className="flex flex-col items-center justify-center h-full text-center p-8 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')]">
    <div className="mb-8 relative">
       <div className="absolute inset-0 bg-yellow-200 blur-xl opacity-50 rounded-full"></div>
       <Hammer size={80} className="text-stone-700 relative z-10 animate-bounce" />
    </div>
    <h2 className="text-3xl font-bold text-stone-800 mb-4 uppercase tracking-widest border-b-4 border-stone-800 pb-2">
      –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
    </h2>
    <p className="text-stone-600 max-w-xs leading-relaxed">
      –ú—ã –≥–æ—Ç–æ–≤–∏–º –Ω–æ–≤—ã–µ –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥–ª—è–Ω–∏—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –¥—É—Ö–æ–≤–∫–µ!
    </p>
    <div className="mt-12 opacity-30">
       üöß üöß üöß
    </div>
  </div>
);

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–µ—Ü–µ–ø—Ç–∞
const RecipeContent = ({ recipe }) => (
  <div className="h-full flex flex-col md:flex-row gap-4 md:gap-8">
    {/* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ */}
    <div className="w-full md:w-5/12 flex flex-col gap-4">
      {/* –§–æ—Ç–æ */}
      <div className="relative group shadow-lg rotate-1 transition-transform hover:rotate-0 duration-300">
        <div className="p-2 bg-white rounded-sm">
           <img 
            src={recipe.image} 
            alt={recipe.title} 
            className="w-full h-40 md:h-48 object-cover filter sepia-[0.1]"
            onError={(e) => {
                e.target.src = 'https://placehold.co/400x300/e2e8f0/64748b?text=–§–æ—Ç–æ+–±–ª—é–¥–∞';
            }}
           />
        </div>
        {/* –°–∫–æ—Ç—á */}
        <div className="absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-6 bg-yellow-100/80 backdrop-blur-sm rotate-2 shadow-sm border-l border-r border-white/40"></div>
      </div>

      {/* –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã */}
      <div className="bg-white/60 p-4 rounded-sm border border-stone-200 shadow-sm flex-1">
        <h3 className="font-bold text-sm text-stone-800 mb-3 border-b border-stone-300 pb-1 font-serif tracking-widest uppercase flex items-center gap-2">
          <span className="text-emerald-600">‚óè</span> –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
        </h3>
        <ul className="space-y-2">
          {recipe.ingredients.map((ing, i) => (
            <li key={i} className="flex items-start text-xs md:text-sm text-stone-700 font-medium leading-tight">
              <span className="mr-2 text-stone-400">‚Ä¢</span>
              {ing}
            </li>
          ))}
        </ul>
      </div>
    </div>

    {/* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ */}
    <div className="w-full md:w-7/12 flex flex-col">
      <div className="mb-4">
        <div className="flex items-center justify-between mb-1">
           {/* –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –¶–í–ï–¢ MAIN DISH */}
           <span className="text-amber-700 font-black tracking-[0.2em] text-[10px] uppercase border border-amber-200 px-2 py-0.5 rounded-full bg-amber-50">Main Dish</span>
        </div>
        <h2 className="text-2xl md:text-3xl font-serif font-bold text-stone-900 leading-tight mb-2">{recipe.title}</h2>
        <p className="text-stone-500 italic text-sm mb-3 border-l-2 border-stone-300 pl-3">{recipe.subtitle}</p>
        
        {/* –ú–µ—Ç–∞ –¥–∞–Ω–Ω—ã–µ */}
        <div className="flex flex-wrap gap-2 mb-4">
          <MetaTag icon={<Thermometer size={14} />} text={recipe.meta.temp} color="bg-red-50 text-red-800 border-red-100" />
          <MetaTag icon={<Clock size={14} />} text={recipe.meta.time} color="bg-blue-50 text-blue-800 border-blue-100" />
          <MetaTag icon={<Wind size={14} />} text={recipe.meta.mode} color="bg-stone-100 text-stone-700 border-stone-200" />
        </div>
      </div>

      <div className="flex-1 overflow-y-auto pr-1">
        <h3 className="font-bold text-sm text-stone-800 mb-3 font-serif tracking-widest uppercase">
          –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
        </h3>
        <div className="space-y-3">
          {recipe.steps.map((step, i) => {
            const isGrill = step.toLowerCase().includes('–≥—Ä–∏–ª—å');
            return (
              <div key={i} className={`flex gap-3 text-xs md:text-sm text-stone-700 ${isGrill ? 'bg-orange-50 p-2 rounded border border-orange-100' : ''}`}>
                <span className="font-bold font-serif text-lg text-stone-300 leading-none mt-[-2px]">
                  {i + 1}
                </span>
                <p className="leading-relaxed">
                  {isGrill && <Flame size={14} className="inline text-orange-500 mr-1 align-text-bottom" />}
                  {step}
                </p>
              </div>
            )
          })}
        </div>
      </div>
    </div>
  </div>
);

const MetaTag = ({ icon, text, color }) => (
  <div className={`flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-bold border ${color}`}>
     {icon}
     {text}
  </div>
);

export default RecipeBook;